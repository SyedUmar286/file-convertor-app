<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyCloudConvert PRO | 100% Verified Formats</title>
    
    <link rel="icon" type="image/png" href="./logo.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.3/dist/heic2any.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/utif@3.1.0/UTIF.js"></script>

    <style>
        :root { --primary: #cd3d33; --dark: #222; --light: #f4f4f4; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--light); display: flex; flex-direction: column; min-height: 100vh; }
        nav { background: var(--dark); padding: 1rem 2rem; color: white; display: flex; justify-content: space-between; align-items: center; }
        .container { max-width: 900px; width: 95%; margin: 40px auto; text-align: center; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .upload-box { border: 2px dashed #cd3d33; padding: 50px; margin: 20px 0; border-radius: 10px; cursor: pointer; transition: 0.3s; }
        .upload-box:hover { background: #fff5f4; }
        .custom-select { padding: 12px; border-radius: 5px; border: 1px solid #ccc; margin: 10px; width: 200px; }
        .btn-convert { padding: 15px 40px; background: var(--primary); color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 1.1rem; }
        #status { margin-top: 20px; font-weight: bold; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>

<nav><div style="font-size:1.5rem; font-weight:bold;">‚òÅÔ∏è MyCloudConvert PRO</div></nav>

<div class="container">
    <h2>100% Binary File Converter</h2>
    <p>Har format CheckFileType par verify hoga.</p>
    
    <div class="upload-box" onclick="document.getElementById('fileInput').click()">
        <p id="fileNameDisplay">Select File (JPG, PNG, TIFF, BMP, ICO, WebP, etc.)</p>
        <input type="file" id="fileInput" style="display:none" onchange="handleFileSelect(event)">
    </div>

    <div>
        <span>To: </span>
        <select id="toFormat" class="custom-select">
            <option value="jpg">JPG (Image/JPEG)</option>
            <option value="png">PNG (Image/PNG)</option>
            <option value="webp">WEBP (Image/WebP)</option>
            <option value="pdf">PDF (Application/PDF)</option>
            <option value="ico">ICO (Image/x-icon)</option>
            <option value="bmp">BMP (Image/bmp)</option>
            <option value="tiff">TIFF (Image/tiff)</option>
            <option value="gif">GIF (Image/gif)</option>
            <option value="svg">SVG (Image/svg+xml)</option>
        </select>
        <br><br>
        <button class="btn-convert" onclick="startConversion()">Convert & Verify</button>
    </div>
    <div id="status"></div>
</div>

<script>
    function handleFileSelect(e) {
        if(e.target.files[0]) document.getElementById('fileNameDisplay').innerText = "Selected: " + e.target.files[0].name;
    }

    async function startConversion() {
        const file = document.getElementById('fileInput').files[0];
        const target = document.getElementById('toFormat').value;
        const status = document.getElementById('status');
        
        if (!file) { alert("File select karein!"); return; }
        status.innerHTML = "üîÑ Processing Binary Data...";
        status.style.background = "#eee";

        try {
            let blob;

            // 1. PDF Conversion (Solid)
            if (target === 'pdf') {
                const pdfDoc = await PDFLib.PDFDocument.create();
                const bytes = await file.arrayBuffer();
                const img = file.type.includes('png') ? await pdfDoc.embedPng(bytes) : await pdfDoc.embedJpg(bytes);
                const page = pdfDoc.addPage([img.width, img.height]);
                page.drawImage(img, { x: 0, y: 0, width: img.width, height: img.height });
                blob = new Blob([await pdfDoc.save()], { type: 'application/pdf' });
            } 
            // 2. TIFF Conversion (Using UTIF.js for 100% Reality)
            else if (target === 'tiff') {
                const canvas = await fileToCanvas(file);
                const ctx = canvas.getContext('2d');
                const rgba = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
                const tiffBytes = UTIF.encodeImage(rgba, canvas.width, canvas.height);
                blob = new Blob([tiffBytes], { type: 'image/tiff' });
            }
            // 3. SVG (Vector Structure)
            else if (target === 'svg') {
                const dataUrl = await fileToDataUrl(file);
                const svgContent = `<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800"><image href="${dataUrl}" width="100%" height="100%"/></svg>`;
                blob = new Blob([svgContent], { type: 'image/svg+xml' });
            }
            // 4. BMP/ICO/WebP/JPG (Forced MIME Logic)
            else {
                const canvas = await fileToCanvas(file);
                let mime = `image/${target}`;
                if (target === 'jpg') mime = 'image/jpeg';
                if (target === 'ico') mime = 'image/x-icon';
                
                blob = await new Promise(resolve => canvas.toBlob(b => resolve(b), mime, 1.0));
            }

            download(blob, `verified_file.${target}`);
            status.innerHTML = "‚úÖ 100% Success! Ready for CheckFileType.com";
            status.style.background = "#d4edda";
        } catch (err) {
            status.innerHTML = "‚ùå Error: " + err.message;
            status.style.background = "#f8d7da";
        }
    }

    function fileToCanvas(file) {
        return new Promise(resolve => {
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width; canvas.height = img.height;
                    canvas.getContext('2d').drawImage(img, 0, 0);
                    resolve(canvas);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        });
    }

    function fileToDataUrl(file) {
        return new Promise(resolve => {
            const r = new FileReader();
            r.onload = e => resolve(e.target.result);
            r.readAsDataURL(file);
        });
    }

    function download(blob, name) {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = name; a.click();
    }
</script>
</body></html>
